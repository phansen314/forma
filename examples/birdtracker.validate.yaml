# BirdTracker â€” Validation Satellite
#
# Satellite document for birdtracker.forma
# Defines behavioral validation rules that reference the core model's types.
# These rules describe how data is *checked*, not what it *is*.

validations:
  User:
    email:
      - format: email
    username:
      - min_length: 3
      - max_length: 50
      - pattern: "^[a-z0-9_]+$"
    created_at:
      - immutable

  Bird:
    name:
      common:
        - min_length: 1
        - max_length: 200
      scientific:
        - min_length: 1
        - max_length: 200
        - pattern: "^[A-Z][a-z]+ [a-z]+$"    # binomial nomenclature
    wingspan_cm:
      - min: 1
      - max: 500
    description:
      - max_length: 5000
    photo_url:
      - format: uri
    created_at:
      - immutable

  Observation:
    timestamp:
      - not_future: true
    location:
      latitude:
        - min: -90
        - max: 90
      longitude:
        - min: -180
        - max: 180
      altitude:
        - min: -500
        - max: 15000
    count:
      - min: 1
      - max: 10000
    notes:
      - max_length: 10000
    created_at:
      - immutable

  Tag:
    label:
      - min_length: 1
      - max_length: 100
      - pattern: "^[a-z0-9][a-z0-9_-]*$"
